<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Search Movies</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white font-sans">
  <div class="max-w-4xl mx-auto p-6">
    <h1 class="text-3xl font-bold mb-6">Movie Search</h1>
    <input id="search" class="w-full p-3 rounded bg-white/10" placeholder="Search for a movie..." />
    <div id="results" class="grid sm:grid-cols-2 md:grid-cols-3 gap-4 mt-6"></div>
  </div>

  <script>
    const API = "http://127.0.0.1:8000";
    const input = document.getElementById("search");
    const results = document.getElementById("results");

    input.addEventListener("input", async () => {
      const q = input.value.trim();
      if (!q) return results.innerHTML = "";
      const res = await fetch(`${API}/api/movies?q=${encodeURIComponent(q)}&limit=20`);
      const data = await res.json();
      results.innerHTML = data.map(m =>
        `<div class='bg-white/10 p-3 rounded-lg hover:bg-white/20 transition'>
          <div class='font-semibold'>${m.title}</div>
          <div class='text-sm text-white/70'>${m.genres}</div>
        </div>`).join("");
    });
  </script>
</body>
</html>
